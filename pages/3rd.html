<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>3rd Semester - Academic Resort</title>
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="../favicon.svg" />
    <link rel="stylesheet" href="../assets/styles.css" />
    <script src="../assets/script.js" defer></script>
  </head>
  <body>
    <div data-include="../assets/includes/sidebar.html"></div>
    <!-- App Header -->
    <header class="app-header">
      <h1>Academic Resort</h1>
    </header>
    <main class="container">
      <div class="page-intro">
        <h1 class="page-title">3rd Semester - Intermediate Foundation</h1>
        <p>
          <b>
            Explore comprehensive resources for all 3rd Semester courses. Each
            subject has its own dedicated page with organized materials,
            question banks, and teacher-specific resources.
          </b>
        </p>

        <!-- Subject Cards -->
        <div class="subjects-grid">
          <a
            href="subjects/advanced-financial-accounting-i-2101.html"
            class="subject-card"
          >
            <div class="subject-header">
              <span class="subject-code">2101</span>
              <span class="subject-icon">üìä</span>
            </div>
            <h3>Advanced Financial Accounting-I</h3>
            <p>
              Partnership accounting, corporate accounting, and financial statement analysis
            </p>
            <div class="subject-meta">
              <span class="resource-count">40+ Resources</span>
              <span class="question-count">25+ Questions</span>
            </div>
          </a>

          <a href="subjects/macroeconomics-2102.html" class="subject-card">
            <div class="subject-header">
              <span class="subject-code">2102</span>
              <span class="subject-icon">üìà</span>
            </div>
            <h3>Macroeconomics</h3>
            <p>
              National income, economic policies, and macroeconomic theories
            </p>
            <div class="subject-meta">
              <span class="resource-count">35+ Resources</span>
              <span class="question-count">20+ Questions</span>
            </div>
          </a>

          <a
            href="subjects/programming-database-management-2103.html"
            class="subject-card"
          >
            <div class="subject-header">
              <span class="subject-code">2103</span>
              <span class="subject-icon">üíª</span>
            </div>
            <h3>Programming & Database Management</h3>
            <p>
              Programming fundamentals, database design, and data management systems
            </p>
            <div class="subject-meta">
              <span class="resource-count">50+ Resources</span>
              <span class="question-count">30+ Questions</span>
            </div>
          </a>

          <a
            href="subjects/general-science-environment-2104.html"
            class="subject-card"
          >
            <div class="subject-header">
              <span class="subject-code">2104</span>
              <span class="subject-icon">üåç</span>
            </div>
            <h3>General Science & Environment</h3>
            <p>
              Environmental science, sustainable development, and ecological principles
            </p>
            <div class="subject-meta">
              <span class="resource-count">30+ Resources</span>
              <span class="question-count">20+ Questions</span>
            </div>
          </a>

          <a
            href="subjects/business-statistics-i-2105.html"
            class="subject-card"
          >
            <div class="subject-header">
              <span class="subject-code">2105</span>
              <span class="subject-icon">üìä</span>
            </div>
            <h3>Business Statistics-I</h3>
            <p>
              Statistical methods, data analysis, and business research techniques
            </p>
            <div class="subject-meta">
              <span class="resource-count">45+ Resources</span>
              <span class="question-count">28+ Questions</span>
            </div>
          </a>
        </div>

        <!-- Quick Access Links -->
        <div class="quick-access">
          <h3>Quick Access</h3>
          <div class="quick-access-links">
            <a href="../index.html?search=2101" class="quick-link">Search 2101 Resources</a>
            <a href="course-teachers.html?course=2102" class="quick-link">View Teachers</a>
          </div>
        </div>

        <!-- Archive Sections -->
        <div class="archive-section">
          <h3>Batch Archives</h3>
          <div class="batch-selector">
            <button class="batch-btn active" data-batch="29">29th Batch</button>
            <button class="batch-btn" data-batch="28">28th Batch</button>
            <button class="batch-btn" data-batch="27">27th Batch</button>
            <button class="batch-btn" data-batch="26">26th Batch</button>
          </div>
          
          <div id="batch-29" class="batch-content active">
            <div class="drive-section">
              <h4>Current Batch Resources</h4>
              <div id="drive-content-29" class="drive-content">
                <div class="loading">Loading resources...</div>
              </div>
            </div>
          </div>
          
          <div id="batch-28" class="batch-content">
            <div class="drive-section">
              <h4>28th Batch Resources</h4>
              <div id="drive-content-28" class="drive-content">
                <div class="loading">Loading resources...</div>
              </div>
            </div>
          </div>
          
          <div id="batch-27" class="batch-content">
            <div class="drive-section">
              <h4>27th Batch Resources</h4>
              <div id="drive-content-27" class="drive-content">
                <div class="loading">Loading resources...</div>
              </div>
            </div>
          </div>
          
          <div id="batch-26" class="batch-content">
            <div class="drive-section">
              <h4>26th Batch Resources</h4>
              <div id="drive-content-26" class="drive-content">
                <div class="loading">Loading resources...</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <script>
      // Drive Integration with 24-hour cache
      const CACHE_DURATION = 24 * 60 * 60 * 1000; // 24 hours
      const API_KEY = "AIzaSyAMPnGgGkw8ZFPhPWJp8CKj1MUlPTXEqYA";

      // Drive folder mappings for 3rd semester
      const driveMapping = {
        "29": "1o9uDgU26nEf2cY-gGJQPCQJC5XjAyLMN", // 29th batch folder
        "28": "1o9uDgU26nEf2cY-gGJQPCQJC5XjAyLMN", // 28th batch folder  
        "27": "1o9uDgU26nEf2cY-gGJQPCQJC5XjAyLMN", // 27th batch folder
        "26": "1o9uDgU26nEf2cY-gGJQPCQJC5XjAyLMN"  // 26th batch folder
      };

      // Initialize batch content on page load
      document.addEventListener('DOMContentLoaded', function() {
        // Load current batch content
        loadDriveContent('29');
        
        // Batch button handlers
        document.querySelectorAll('.batch-btn').forEach(btn => {
          btn.addEventListener('click', function() {
            const batchId = this.dataset.batch;
            
            // Update active states
            document.querySelectorAll('.batch-btn').forEach(b => b.classList.remove('active'));
            document.querySelectorAll('.batch-content').forEach(c => c.classList.remove('active'));
            
            this.classList.add('active');
            document.getElementById(`batch-${batchId}`).classList.add('active');
            
            // Load content if not already loaded
            loadDriveContent(batchId);
          });
        });
      });

      async function loadDriveContent(batchId) {
        const containerId = `drive-content-${batchId}`;
        const container = document.getElementById(containerId);
        const folderId = driveMapping[batchId];
        
        if (!container || !folderId) return;
        
        // Check if already loaded
        if (container.dataset.loaded === 'true') return;
        
        try {
          const cacheKey = `drive_${batchId}_${folderId}`;
          const cached = localStorage.getItem(cacheKey);
          const cacheTime = localStorage.getItem(`${cacheKey}_time`);
          
          if (cached && cacheTime && (Date.now() - parseInt(cacheTime)) < CACHE_DURATION) {
            container.innerHTML = cached;
            container.dataset.loaded = 'true';
            return;
          }
          
          container.innerHTML = '<div class="loading">üìÅ Loading resources...</div>';
          
          const response = await fetch(
            `https://www.googleapis.com/drive/v3/files?q='${folderId}'+in+parents&key=${API_KEY}&fields=files(id,name,mimeType,webViewLink)`
          );
          
          if (!response.ok) throw new Error('Failed to fetch');
          
          const data = await response.json();
          const html = formatDriveContent(data.files || []);
          
          container.innerHTML = html;
          container.dataset.loaded = 'true';
          
          // Cache the result
          localStorage.setItem(cacheKey, html);
          localStorage.setItem(`${cacheKey}_time`, Date.now().toString());
          
        } catch (error) {
          console.error('Error loading drive content:', error);
          container.innerHTML = '<div class="error">Failed to load resources</div>';
        }
      }

      function formatDriveContent(files) {
        if (!files || files.length === 0) {
          return '<div class="no-content">No resources available</div>';
        }
        
        const folders = files.filter(f => f.mimeType === 'application/vnd.google-apps.folder');
        const documents = files.filter(f => f.mimeType !== 'application/vnd.google-apps.folder');
        
        let html = '';
        
        if (folders.length > 0) {
          html += '<div class="folders-section"><h5>üìÅ Folders</h5>';
          folders.forEach(folder => {
            html += `<div class="resource-item folder">
              <a href="${folder.webViewLink}" target="_blank">${folder.name}</a>
            </div>`;
          });
          html += '</div>';
        }
        
        if (documents.length > 0) {
          html += '<div class="documents-section"><h5>üìÑ Documents</h5>';
          documents.forEach(doc => {
            html += `<div class="resource-item document">
              <a href="${doc.webViewLink}" target="_blank">${doc.name}</a>
            </div>`;
          });
          html += '</div>';
        }
        
        return html;
      }
    </script>
  </body>
</html>
          src="https://docs.google.com/embeddedfolderview?id=1cD9UZpwr4F4u79N6iI4rJk_J6jVocnGX#grid"
          frameborder="0"
          style="width: 100%; height: 600px"
        ></iframe>
      </section>
      <section class="card">
        <h2 id="batch-28">28th Batch</h2>
        <iframe
          src="https://docs.google.com/embeddedfolderview?id=11X8KpIfn1Jkh8_sy96xNbg8a1Z8EWy-I#grid"
          frameborder="0"
          style="width: 100%; height: 600px"
        ></iframe>
      </section>
      <section class="card">
        <h2 id="batch-27">27th Batch</h2>
        <iframe
          src="https://docs.google.com/embeddedfolderview?id=1fZuFo3qsPUtaN53ZvKOrwgb-fVIr8B4N#grid"
          frameborder="0"
          style="width: 100%; height: 600px"
        ></iframe>
      </section>
      <section class="card">
        <h2 id="batch-26">26th Batch</h2>
        <iframe
          src="https://docs.google.com/embeddedfolderview?id=1-rpP6GshMYj7QoCRRSGWBmRsren-tfWZ#grid"
          frameborder="0"
          style="width: 100%; height: 600px"
        ></iframe>
      </section>
      <section class="card">
        <h2>Personal Notes</h2>
        <iframe
          src="https://docs.google.com/embeddedfolderview?id=15d1gjiKGXu_FixNjxdVVwyny4cFVAwMV#grid"
          frameborder="0"
          style="width: 100%; height: 600px"
        ></iframe>
      </section>
      <section class="card">
        <h2>26th Class Updates</h2>
        <iframe
          src="https://docs.google.com/embeddedfolderview?id=10MaWyjpRPbdrTfxxEWiXw2c3xor9gZnA#grid"
          frameborder="0"
          style="width: 100%; height: 600px"
        ></iframe>
      </section>
    </main>
    <div data-include="../assets/includes/footer.html"></div>
  </body>
</html>
